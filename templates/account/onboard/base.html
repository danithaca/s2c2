{% extends "base.html" %}

{% block extra_header %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.2/css/bootstrap3/bootstrap-switch.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.2/js/bootstrap-switch.min.js"></script>

{{ form.media }}
<script type="text/javascript">
$(document).ready(function() {
  var path = window.location.pathname;
  $('div.onboard-sidebar a[href="'+ path +'"]').addClass('active');

  // change to switch
  var bsOptions = defaultBootstrapSwitchOptions();
  $('input.switch').bootstrapSwitch(bsOptions);

  // hide none active tab in xs.
  var hide_tab = function() {
    if (is_viewport_xs()) {
      $('#onboard-pane .panel-heading li:not(.active)').hide();
    }
  };
  hide_tab();
  // this doesn't show(unhide) the other items.
  //$(window).resize(hide_tab);
});
</script>
{% block more_header %}{% endblock %}
{% endblock %}

{% block title %}New user onboard{% endblock %}

{% block content %}
<div class="panel panel-default" id="onboard-pane">
  <div class="panel-heading">
    <ul class="nav nav-tabs nav-justified">
      {% for name, meta in steps_meta.items %}
        <li class="{% if meta.position == 0 %}active{% elif meta.position > 0 %}disabled{% endif %}" data-slug="step-{{ forloop.counter }}"><a href="{{ meta.url }}">Step {{ forloop.counter }}<span class="visible-xs-inline">/{{ steps_meta|length }}</span> <i class="fa fa-angle-double-right"></i></a></li>
      {% endfor %}
    </ul>
  </div>
  <div class="panel-body">
    {% if step_title %}
      <p class="well"><span class="lead">{{ step_title }}</span>{{ step_note }}</p>
    {% endif %}
    {% block step-block %}{% endblock %}
  </div>
</div>

{% endblock %}