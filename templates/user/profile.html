{% extends "base_page.html" %}
{% load bootstrap %}
{% load s2c2_tags %}

{% block title %}User | S2C2{% endblock %}

{% block page-header %}
  {{ user_profile|name }}
  <small>{{ user_profile.display_role|title }}{% if not user_profile.is_verified %} {% icon 'unverified' %}{% endif %}</small>
{% endblock %}

{% block page-header-extra %}{% if verify_form %}
  <form class="form" method="post" action="{% url 'user:verify' %}">
    {% csrf_token %}
    {{ verify_form }}
    <div class="form-group alert alert-warning">
      <button type="submit" class="btn btn-primary">Verify</button>
      <span class="text-muted">You may verify the user to have full access to the center you manage.</span>
    </div>
  </form>
{% endif %}{% endblock %}

{% block page-summary %}
  <div class="row">
    <div class="col-sm-6">
      <div class="panel panel-default">
        <div class="panel-body">
          <div class="row">
            <div class="col-sm-4"><div class="text-center">
              <img src="{% user_picture_url user_profile %}" class="img-circle img-responsive">
              {% if not user_profile.has_picture and user == user_profile.user %}<a href="{% url 'user:picture' %}" class="btn btn-default">Edit picture</a>{% endif %}
            </div></div>
            <div class="col-sm-8">
              <table class="table table-condensed">
                <tr><th scope="row">Center{{ user_profile.centers.all|pluralize }}</th><td><ul class="list-unstyled">
                  {% for center in user_profile.centers.all %}
                    <li><a href="{% url 'cal:center' cid=center.id %}">{% icon center %} {{ center|name }}</a></li>
                  {% empty %}
                    <li class="text-muted">-None-</li>
                  {% endfor %}
                </ul></td></tr>
                <tr><th scope="row">Phone</th><td><ul class="list-unstyled">
                  <li>{% if user_profile.phone_main %}<i class="fa fa-phone"></i> {{ user_profile.phone_main }}{% else %}<span class="text-muted">-None-</span>{% endif %}</li>
                  {% if user_profile.phone_backup %}<li><i class="fa fa-phone"></i> {{ user_profile.phone_backup }}</li>{% endif %}
                </ul></td></tr>
                <tr><th scope="row">Email</th><td><ul class="list-unstyled">
                  <li><i class="fa fa-envelope"></i> {{ user_profile.email }}</li>
                </ul></td></tr>
                {% if user_profile.address %}<tr><th scope="row">Address</th><td><ul class="list-unstyled"><li>{{ user_profile.address }}</li></ul></td></tr>{% endif %}
                {% if user_profile.is_center_staff %}
                  <tr><th scope="row">Calendar</th><td><ul class="list-unstyled"><li><a href="{% url 'cal:staff' uid=user_profile.id %}" title="View calendar">{% icon 'calendar' %} View</a></li></ul></td></tr>
                {% endif %}
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-6">
      <div class="panel panel-default">
        <div class="panel-body">
          <strong>Personal note: </strong><span{% if not user_profile.note %} class="text-muted"{% endif %}>{{ user_profile.note|default:'-None-' }}</span>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
