{% extends "base.html" %}
{% load staticfiles %}
{% load bootstrap %}
{% load s2c2_tags %}

{% block extra_header %}
  {% include 'autocomplete_light/static.html' %}
  <script type="text/javascript">
    $(document).ready(function() {
      $('#id_pick').yourlabsAutocomplete({
        url: '{% url 'cal:user_autocomplete' cid=classroom.pk %}',
        choiceSelector: 'div.autocomplete-choice',
        minimumCharacters: 1,
        queryVariable: 'pick'
      }).input.bind('selectChoice', function (e, choice, autocomplete) {
            $(e.target).val(choice.text());
            $('#id_staff').val('0');
          });

      $('#id_staff').change(function() {
        $('#id_pick').val('');
      });

      $('[data-toggle="tooltip"]').tooltip();
    });
  </script>
{% endblock %}

{% block page %}
  <div class="row">
    <div class="col-sm-8 col-sm-offset-2">
      <div class="panel panel-default">
        <div class="panel-heading">Assign staff to {% icon classroom %} {{ classroom|name }}</div>
        <div class="panel-body">
          <form class="form-horizontal" role="form" method="post" action="{% url 'cal:meet' cid=classroom.id %}">
            {% csrf_token %}
            {{ form|bootstrap_horizontal:'col-sm-4' }}
            <div class="form-group">
              <div class="col-sm-offset-4 col-sm-8">
                <button type="submit" class="btn btn-lg btn-primary" data-toggle="tooltip" data-placement="bottom" title="Assign staff according to availability. No assignment is made if staff is not available.">Assign</button>
                <button type="submit" class="btn btn-danger" name="forced-assign" data-toggle="tooltip" data-placement="bottom" title="Arbitrarily assign staff regardless of staff availability, except for when the staff is assigned to another classroom.">Assign Arbitrarily</button>
                <a class="btn btn-default" href="javascript:history.back()">Go Back</a>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
