{% extends "base.jinja2" %}
{% load bootstrap %}
{% load s2c2_tags %}

{% block title %}Staff Regular Schedule | S2C2{% endblock %}

{% block page %}
  <div class="page-header">
    <h1>{{ user_profile.get_display_name }} <small>regular week schedule</small></h1>
  </div>

  <h2>
    {{ dow.name }}
    <a href="{% url 'slot:staff_regular' %}" title="Go to the regular calendar for today" class="btn btn-default btn-sm"><i class="fa fa-calendar"></i> Today</a>
    <a href="#" title="Switch to the regular schedule" class="btn btn-default btn-sm"><i class="fa fa-exchange"></i> Switch</a>
  </h2>
  {% dow-pager dow %}

  <div class="row">
    <div class="col-sm-6">
      <table class="table table-bordered table-hover table-striped table-condensed">
        <thead><tr>
          <th class="text-center">{{ dow.name }}</th>
          <th class="text-center">Availability and Assignment</th>
        </tr></thead>
        <tbody>
        {% for r1, r2 in slot_table_data %}
          <tr>
            <th scope="row" class="text-center">{{ r1 }}</th>
            {% if r2 %}<td class="text-muted text-center">Available</td>{% else %}<td></td>{% endif %}
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="col-sm-6">

      <div class="panel-group" id="command-list">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title"><a data-toggle="collapse" data-parent="#command-list" href="#command-form-classroom">View classroom needs</a></h4>
          </div>
          <div id="command-form-classroom" class="panel-collapse collapse">
            <div class="panel-body">N/A</div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title"><a class="collapsed" data-toggle="collapse" data-parent="#command-list" href="#command-form-offer-add">Add availability</a></h4>
          </div>
          <div id="command-form-offer-add" class="panel-collapse collapse">
            <div class="panel-body">
              <form class="form-horizontal" role="form" method="post" action="{% url 'slot:offer_regular_add' uid=user_profile.pk %}">
                {% csrf_token %}
                {{ command_form_offer_add|bootstrap_horizontal:'col-sm-4' }}
                <div class="form-group">
                  <div class="col-sm-offset-4 col-sm-8">
                    <button type="submit" class="btn btn-primary">Add</button>
                    <span class="help-block">* Add only the missing time slot(s).</span>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title"><a class="collapsed" data-toggle="collapse" data-parent="#command-list" href="#command-form-offer-delete">Delete availability</a></h4>
          </div>
          <div id="command-form-offer-delete" class="panel-collapse collapse in">
            <div class="panel-body">
              <form class="form-horizontal" role="form" method="post" action="{% url 'slot:offer_regular_delete' uid=user_profile.pk %}">
                {% csrf_token %}
                {{ command_form_offer_delete|bootstrap_horizontal:'col-sm-4' }}
                <div class="form-group">
                  <div class="col-sm-offset-4 col-sm-8">
                    <button type="submit" class="btn btn-primary" name="delete">Delete</button>
                    <button type="submit" class="btn btn-primary" name="delete-all">Delete All Day</button>
                    <span class="help-block">* Deleting availability cannot be undone and might invalidate existing classroom assignments.</span>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title"><a class="collapsed" data-toggle="collapse" data-parent="#command-list" href="#command-form-log">View change log</a></h4>
          </div>
          <div id="command-form-log" class="panel-collapse collapse">
            <div class="panel-body">N/A</div>
          </div>
        </div>
      </div>

    </div>
  </div>
{% endblock %}

