{% extends "base_page.html" %}
{% load staticfiles %}
{% load bootstrap %}
{% load s2c2_tags %}
{% load s2c2_center %}

{% block title %}Center | S2C2{% endblock %}

{% block page-header %}{% icon center %} {{ center|name }} <small>Children's Center</small>{% endblock %}

{% block page-summary %}
  <table class="table table-condensed table-hover">
    <tr><th scope="row">Address</th><td>{{ center.address }}</td></tr>
    <tr><th scope="row">Area</th><td>{{ center.area }}</td></tr>
    <tr><th scope="row">Manager{{ managers|pluralize }}</th><td>
      {% if managers %}
      <ul class="list-inline">
        {% for manager in managers %}
          <li><a href="{% url 'dashboard' uid=manager.id %}">{% icon manager %} {{ manager|name }}</a> {% if not manager.profile.verified %}{% icon 'unverified' %}{% endif %}</li>
        {% endfor %}
      </ul>
      {% else %}
        <span class="text-muted">-None-</span>
      {% endif %}
    </td></tr>
  </table>
{% endblock %}

{% block page-content %}
  <nav><ul class="nav nav-tabs">
    <li{% ifequal tab 'directory' %} class="active"{% endifequal %}><a href="{% url 'center_directory' pk=center.pk %}">Directory</a></li>
    <li{% ifequal tab 'list-classroom' %} class="active"{% endifequal %}><a href="{% url 'center_list_classroom' pk=center.pk %}">Classroom Details</a></li>
    <li{% ifequal tab 'list-staff' %} class="active"{% endifequal %}><a href="{% url 'center_list_staff' pk=center.pk %}">Staff Details</a></li>
  </ul></nav>

  {% if tab == 'directory' %}

    <h2>Classroom</h2>
    <ul class="nav nav-pills">
    {% for classroom in classrooms %}
      <li><a href="{% url 'classroom' pk=classroom.pk %}">{% icon classroom %} {{ classroom|name }}</a></li>
    {% endfor %}
    </ul>
    {% for header, staff_list in sections %}
      <h2>{{ header|title }}</h2>
      <ul class="nav nav-pills">
        {% for staff in staff_list %}
          <li><a href="{% url 'dashboard' uid=staff.id %}">{% icon staff %} {{ staff|name }} {% if not staff.profile.verified %}{% icon 'unverified' %}{% endif %}</a></li>
        {% endfor %}
      </ul>
    {% endfor %}

  {% elif tab == 'list-classroom' %}
    <div class="row">
      <div class="col-sm-6"><h2>{% if day.is_regular %}Every {{ day.value|date:'l' }}{% else %}{{ day.value|date:'F j, l' }}{% endif %}</h2></div>
      <div class="col-sm-6"><ul class="nav-week pagination pull-right">
        <li{% if day.is_regular %} class="disabled"{% endif %}><a href="?day={{ day.prev_week.get_token }}"><i class="fa fa-fast-backward"></i></a></li>
        <li><a href="."><i class="fa fa-calendar"></i> Today</a></li>
        <li><a href="?day={{ day.switch.get_token }}"><i class="fa fa-exchange"></i> Switch</a></li>
        <li{% if day.is_regular %} class="disabled"{% endif %}><a href="?day={{ day.next_week.get_token }}"><i class="fa fa-fast-forward"></i></a></li>
      </ul></div>
    </div>
    <div class="text-center">
      {% url 'center_list_classroom' pk=center.pk as pager_url %}
      {% if day.is_regular %}
        {% day-regular-pager day pager_url %}
      {% else %}
        {% day-date-pager day pager_url %}
      {% endif %}
    </div>

    <table class="table table-hover table-stripped table-bordered">
      <thead><tr>
        <th>Name</th>
        <th>Staff</th>
        <th>Unmet Need</th>
      </tr></thead>
      <tbody>
      {% for classroom in list_classroom %}
        <tr>
          <td>{% icon classroom %} <a href="{% url 'classroom' pk=classroom.pk %}">{{ classroom|name }}</a></td>
          <td>{% classroom-day-staff classroom day %}</td>
          <td>{% classroom-day-unmet-need classroom day %}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% elif tab == 'list-staff' %}
    <table class="table table-hover table-stripped table-bordered">
      <caption>List of Staff</caption>
      <thead><tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Role</th>
        <th>Note</th>
      </tr></thead>
      <tbody>
      {% for staff in list_staff %}
        <tr>
        <td>{% icon staff %} <a href="{% url 'dashboard' uid=staff.pk %}">{{ staff|name }}</a>{% if not staff.is_verified %} {% icon 'unverified' %}{% endif %}</td>
        <td>{{ staff.phone_main }}</td>
        <td>{{ staff.display_role|title }}</td>
        <td>{{ staff.note|truncatechars:50 }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% endif %}

{% endblock %}